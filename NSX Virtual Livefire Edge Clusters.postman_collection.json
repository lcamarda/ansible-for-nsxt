{
	"info": {
		"_postman_id": "f090afc1-baa7-4fa6-8d02-8cb7a6cf6d70",
		"name": "NSX Virtual Livefire Edge Clusters",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Create Site A Gateways (T0/T1)",
			"request": {
				"auth": {
					"type": "basic",
					"basic": [
						{
							"key": "password",
							"value": "VMware1!VMware1!",
							"type": "string"
						},
						{
							"key": "username",
							"value": "admin",
							"type": "string"
						}
					]
				},
				"method": "PATCH",
				"header": [
					{
						"key": "Content-Type",
						"name": "Content-Type",
						"type": "text",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\r\n  \"resource_type\": \"Infra\",\r\n  \"children\": [\r\n    {\r\n      \"resource_type\": \"ChildSegment\",\r\n      \"marked_for_delete\": false,\r\n      \"Segment\": {\r\n        \"type\": \"DISCONNECTED\",\r\n        \"vlan_ids\": [\r\n          \"100\"\r\n        ],\r\n        \"transport_zone_path\": \"/infra/sites/default/enforcement-points/default/transport-zones/{{SITEA_EDGE_VLAN_TZ_ID}}\",\r\n        \"resource_type\": \"Segment\",\r\n        \"id\": \"edge-site-a-link1\",\r\n        \"display_name\": \"edge-site-a-link1\",\r\n        \"advanced_config\": {\r\n          \"uplink_teaming_policy_name\": \"uplink-1-only\"\r\n        }\r\n      }\r\n    },\r\n    {\r\n      \"resource_type\": \"ChildSegment\",\r\n      \"marked_for_delete\": false,\r\n      \"Segment\": {\r\n        \"type\": \"DISCONNECTED\",\r\n        \"vlan_ids\": [\r\n          \"200\"\r\n        ],\r\n        \"transport_zone_path\": \"/infra/sites/default/enforcement-points/default/transport-zones/{{SITEA_EDGE_VLAN_TZ_ID}}\",\r\n        \"resource_type\": \"Segment\",\r\n        \"id\": \"edge-site-a-link2\",\r\n        \"display_name\": \"edge-site-a-link2\",\r\n        \"advanced_config\": {\r\n          \"uplink_teaming_policy_name\": \"uplink-2-only\"\r\n        }\r\n      }\r\n    },\r\n    {\r\n      \"resource_type\": \"ChildTier1\",\r\n      \"marked_for_delete\": false,\r\n      \"Tier1\": {\r\n        \"resource_type\": \"Tier1\",\r\n        \"id\": \"t1-tenant1\",\r\n        \"description\": \"tenant-1 gateway\",\r\n        \"display_name\": \"t1-tenant1\",\r\n        \"failover_mode\": \"NON_PREEMPTIVE\",\r\n        \"tier0_path\": \"/infra/tier-0s/t0-sitea\",\r\n        \"route_advertisement_types\": [\r\n          \"TIER1_CONNECTED\"\r\n        ],\r\n        \"children\": [\r\n          {\r\n            \"resource_type\": \"ChildLocaleServices\",\r\n            \"LocaleServices\": {\r\n              \"resource_type\": \"LocaleServices\",\r\n              \"id\": \"default\",\r\n              \"edge_cluster_path\": \"/infra/sites/default/enforcement-points/default/edge-clusters/{{SITEA_EDGE_CLUSTER_ID}}\"\r\n            }\r\n          },\r\n          {\r\n            \"resource_type\": \"ChildSegment\",\r\n            \"Segment\": {\r\n              \"resource_type\": \"Segment\",\r\n              \"id\": \"ov-web\",\r\n              \"description\": \"overlay web logical switch\",\r\n              \"display_name\": \"OV-WEB\",\r\n              \"transport_zone_path\": \"/infra/sites/default/enforcement-points/default/transport-zones/{{SITEA_OVERLAY_TZ_ID}}\",\r\n              \"subnets\": [\r\n                {\r\n                  \"gateway_address\": \"172.16.10.1/24\"\r\n                }\r\n              ]\r\n            }\r\n          },\r\n          {\r\n            \"resource_type\": \"ChildSegment\",\r\n            \"Segment\": {\r\n              \"resource_type\": \"Segment\",\r\n              \"id\": \"ov-app\",\r\n              \"description\": \"overlay app logical switch\",\r\n              \"display_name\": \"OV-APP\",\r\n              \"transport_zone_path\": \"/infra/sites/default/enforcement-points/default/transport-zones/{{SITEA_OVERLAY_TZ_ID}}\",\r\n              \"subnets\": [\r\n                {\r\n                  \"gateway_address\": \"172.16.20.1/24\"\r\n                }\r\n              ]\r\n            }\r\n          },\r\n          {\r\n            \"resource_type\": \"ChildSegment\",\r\n            \"Segment\": {\r\n              \"resource_type\": \"Segment\",\r\n              \"id\": \"ov-db\",\r\n              \"description\": \"overlay db logical switch\",\r\n              \"display_name\": \"OV-DB\",\r\n              \"transport_zone_path\": \"/infra/sites/default/enforcement-points/default/transport-zones/{{SITEA_OVERLAY_TZ_ID}}\",\r\n              \"subnets\": [\r\n                {\r\n                  \"gateway_address\": \"172.16.30.1/24\"\r\n                }\r\n              ]\r\n            }\r\n          }\r\n        ]\r\n      }\r\n    },\r\n    {\r\n      \"resource_type\": \"ChildTier0\",\r\n      \"marked_for_delete\": false,\r\n      \"Tier0\": {\r\n        \"id\": \"t0-sitea\",\r\n        \"resource_type\": \"Tier0\",\r\n        \"ha_mode\": \"ACTIVE_STANDBY\",\r\n        \"failover_mode\": \"NON_PREEMPTIVE\",\r\n        \"children\": [\r\n          {\r\n            \"resource_type\": \"ChildLocaleServices\",\r\n            \"LocaleServices\": {\r\n              \"resource_type\": \"LocaleServices\",\r\n              \"id\": \"default\",\r\n              \"edge_cluster_path\": \"/infra/sites/default/enforcement-points/default/edge-clusters/{{SITEA_EDGE_CLUSTER_ID}}\",\r\n              \"route_redistribution_types\": [\r\n                \"TIER1_CONNECTED\"\r\n              ],\r\n              \"children\": [\r\n                {\r\n                  \"resource_type\": \"ChildTier0Interface\",\r\n                  \"Tier0Interface\": {\r\n                    \"edge_path\": \"/infra/sites/default/enforcement-points/default/edge-clusters/{{SITEA_EDGE_CLUSTER_ID}}/edge-nodes/{{EDGE01A_ID}}\",\r\n                    \"segment_path\": \"/infra/segments/edge-site-a-link1\",\r\n                    \"type\": \"EXTERNAL\",\r\n                    \"resource_type\": \"Tier0Interface\",\r\n                    \"id\": \"LRP-VLANExt1Ls_EN1\",\r\n                    \"display_name\": \"LRP-VLANExt1Ls_EN1\",\r\n                    \"subnets\": [\r\n                      {\r\n                        \"ip_addresses\": [\r\n                          \"192.168.254.13\"\r\n                        ],\r\n                        \"prefix_len\": 29\r\n                      }\r\n                    ]\r\n                  }\r\n                },\r\n                {\r\n                  \"resource_type\": \"ChildBgpRoutingConfig\",\r\n                  \"BgpRoutingConfig\": {\r\n                    \"local_as_num\": \"65001\",\r\n                    \"enabled\": true,\r\n                    \"ecmp\": true,\r\n                    \"graceful_restart\": false,\r\n                    \"multipath_relax\": true,\r\n                    \"inter_sr_ibgp\": false,\r\n                    \"resource_type\": \"BgpRoutingConfig\",\r\n                    \"id\": \"bgp\",\r\n                    \"display_name\": \"bgp\",\r\n                    \"children\": [\r\n                      {\r\n                        \"BgpNeighborConfig\": {\r\n                          \"neighbor_address\": \"192.168.254.9\",\r\n                          \"remote_as_num\": \"65002\",\r\n                          \"keep_alive_time\": 60,\r\n                          \"hold_down_time\": 180,\r\n                          \"allow_as_in\": false,\r\n                          \"maximum_hop_limit\": 1,\r\n                          \"resource_type\": \"BgpNeighborConfig\",\r\n                          \"id\": \"csr-01a\",\r\n                          \"display_name\": \"csr-01a\"\r\n                        },\r\n                        \"resource_type\": \"ChildBgpNeighborConfig\",\r\n                        \"marked_for_delete\": false\r\n                      },\r\n                      {\r\n                        \"BgpNeighborConfig\": {\r\n                          \"neighbor_address\": \"192.168.254.17\",\r\n                          \"remote_as_num\": \"65002\",\r\n                          \"keep_alive_time\": 60,\r\n                          \"hold_down_time\": 180,\r\n                          \"allow_as_in\": false,\r\n                          \"maximum_hop_limit\": 1,\r\n                          \"resource_type\": \"BgpNeighborConfig\",\r\n                          \"id\": \"csr-02a\",\r\n                          \"display_name\": \"csr-02a\"\r\n                        },\r\n                        \"resource_type\": \"ChildBgpNeighborConfig\",\r\n                        \"marked_for_delete\": false\r\n                      }\r\n                    ]\r\n                  }\r\n                },\r\n                {\r\n                  \"resource_type\": \"ChildTier0Interface\",\r\n                  \"Tier0Interface\": {\r\n                    \"edge_path\": \"/infra/sites/default/enforcement-points/default/edge-clusters/{{SITEA_EDGE_CLUSTER_ID}}/edge-nodes/{{EDGE02A_ID}}\",\r\n                    \"segment_path\": \"/infra/segments/edge-site-a-link1\",\r\n                    \"type\": \"EXTERNAL\",\r\n                    \"resource_type\": \"Tier0Interface\",\r\n                    \"id\": \"LRP-VLANExt1Ls_EN2\",\r\n                    \"display_name\": \"LRP-VLANExt1Ls_EN2\",\r\n                    \"subnets\": [\r\n                      {\r\n                        \"ip_addresses\": [\r\n                          \"192.168.254.14\"\r\n                        ],\r\n                        \"prefix_len\": 29\r\n                      }\r\n                    ]\r\n                  }\r\n                },\r\n                {\r\n                  \"resource_type\": \"ChildTier0Interface\",\r\n                  \"Tier0Interface\": {\r\n                    \"edge_path\": \"/infra/sites/default/enforcement-points/default/edge-clusters/{{SITEA_EDGE_CLUSTER_ID}}/edge-nodes/{{EDGE01A_ID}}\",\r\n                    \"segment_path\": \"/infra/segments/edge-site-a-link2\",\r\n                    \"type\": \"EXTERNAL\",\r\n                    \"resource_type\": \"Tier0Interface\",\r\n                    \"id\": \"LRP-VLANExt2Ls_EN1\",\r\n                    \"display_name\": \"LRP-VLANExt2Ls_EN1\",\r\n                    \"subnets\": [\r\n                      {\r\n                        \"ip_addresses\": [\r\n                          \"192.168.254.21\"\r\n                        ],\r\n                        \"prefix_len\": 29\r\n                      }\r\n                    ]\r\n                  }\r\n                },\r\n                {\r\n                  \"resource_type\": \"ChildTier0Interface\",\r\n                  \"Tier0Interface\": {\r\n                    \"edge_path\": \"/infra/sites/default/enforcement-points/default/edge-clusters/{{SITEA_EDGE_CLUSTER_ID}}/edge-nodes/{{EDGE02A_ID}}\",\r\n                    \"segment_path\": \"/infra/segments/edge-site-a-link2\",\r\n                    \"type\": \"EXTERNAL\",\r\n                    \"resource_type\": \"Tier0Interface\",\r\n                    \"id\": \"LRP-VLANExt2Ls_EN2\",\r\n                    \"display_name\": \"LRP-VLANExt2Ls_EN2\",\r\n                    \"subnets\": [\r\n                      {\r\n                        \"ip_addresses\": [\r\n                          \"192.168.254.22\"\r\n                        ],\r\n                        \"prefix_len\": 29\r\n                      }\r\n                    ]\r\n                  }\r\n                }\r\n              ]\r\n            }\r\n          }\r\n        ]\r\n      }\r\n    }\r\n  ]\r\n}"
				},
				"url": {
					"raw": "https://nsxmgr-01a.corp.local/policy/api/v1/infra/",
					"protocol": "https",
					"host": [
						"nsxmgr-01a",
						"corp",
						"local"
					],
					"path": [
						"policy",
						"api",
						"v1",
						"infra",
						""
					]
				}
			},
			"response": []
		}
	]
}